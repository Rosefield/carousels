<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="all" name="robots"/>

    <title>carousels</title>

    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/flick/jquery-ui.css">
    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="../dist/carousels.js"></script>
  </head>

  <body onload="carousels('selected_cost', 'selected_param', 'preprocessing', 'inp','out');">
    <div id="content">
      <div id="title">carousels</div>
      <div id="description">
        Library for concisely defining abstract metrics over JavaScript syntax.
      </div>
      <div id="sheet">
        <div class="section">
          <h2>Purpose</h2>
          This library makes it possible to rapidly assemble abstract metrics over subsets of JavaScript syntax.
        </div>
        <div class="section">
          <h2>Examples</h2>
          <p>
            Below are a few interactive examples of how the library can be used to define a grammar and parse a concrete syntax string into a JSON representation of an abstract syntax tree. You can change the grammar or input string and see the results immediately.
          </p>
          <h3>Basic Example</h3>
          <td>
            Input definitions:<br/>
            <textarea id="inp" rows="23">
function demo(x) {
  var arr = [1,2,3,4];

  var arr_bool = arr.map((curr,i) => arr[i].lt(arr[i+1]));
  arr = arr.map((curr,i) => arr_bool[i].if_else(arr_bool[i-1].if_else(arr[i],arr[i-1]), arr[i+1]));

  return arr;
}

function demo2(x) {
  var arr = [1,2,3,4];

  for (let i = 0; i < 4; i++) {
    let cmp = arr[i].lt(arr[i+1]);
    arr[i] = cmp.if_else(arr_bool[i-1].if_else(arr[i], arr[i-1]), arr[i+1])
  }

  return arr;
}

async function demo3(x) {
  var arr = [1,2,3,4];

  for (let i = 0; i < 4; i++) {
    let cmp = await arr[i].lt(arr[i+1]);
    if (cmp.open() == 1) {  // awaited
      arr[i] = arr_bool[i-1].if_else(arr[i], arr[i-1]);
    } else {
      arr[i] = arr[i+1];
    }
  }

  return arr;
}</textarea>
          </td>
          <table>
            <br></br>
            <tr>
              <form>
                  <select id="selected_cost" onchange="carousels('selected_cost', 'selected_param', 'preprocessing', 'inp','out');">
                    <option value="nothing">Select a Cost</option>
                    <option value="onlineRounds" selected="selected">onlineRounds</option>
                    <option value="offlineRounds">offlineRounds</option>
                    <option value="onlineMsg">onlineMsg</option>
                    <option value="offlineMsg">offlineMsg</option>
                  </select>
                  <div id ="param" style ="display:none">
                    <select id="selected_param" onchange="carousels('selected_cost', 'selected_param', 'preprocessing', 'inp','out');">
                      <option value="nothing">Fix a Parameter</option>
                      <option value="numbits" selected="selected">numbits</option>
                      <option value="numparties">numparties</option>
                    </select>
                </div>
                <div id="checkbx" style ="display:none">
                  <input type="checkbox" id="preprocessing" onchange="carousels('selected_cost', 'selected_param', 'preprocessing', 'inp','out');" checked>Include Pre-Processing costs
                </div>
              </form>
              <br/><br/>
              <td>
                Cost specification w/o preprocessing:<br/>
                <textarea id="spec" rows="18">

                </textarea>
              </td>
              <td>
                  Cost specification w/ preprocessing:<br/>
                <textarea id="spec_prep" rows="18">

                </textarea>
              </td>
            </tr>
            <tr>
              <td colspan="2">
                Static analysis results:<br/>
                <div><pre id="out"></pre></div>
              </td>
            </tr>
            <table>
              Performance:<br/>
              <div id="myPlot" style="width:100%; height:100%"></div>
          </table>
        </div>
      </div><!-- /#sheet -->
      <div id="footer_spacer"></div>
    </div><!-- /#content -->
    <div id="footer">
      <hr/>
      <a href="https://www.github.com/multiparty/carousels">Repository</a>
    </div><!-- /#footer -->
  </body>
</html>
