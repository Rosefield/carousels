<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="all" name="robots"/>

    <title>carousels</title>

    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.10.4/themes/flick/jquery-ui.css">
    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="../dist/carousels.js"></script>
  </head>

  <body onload="carousels('selected_cost', 'selected_param', 'preprocessing', 'inp','out');">
    <div id="content">
      <div id="title">carousels</div>
      <div id="description">
        Library for concisely defining abstract metrics over JavaScript syntax.
      </div>
      <div id="sheet">
        <div class="section">
          <h2>Purpose</h2>
          This library makes it possible to rapidly assemble abstract metrics over subsets of JavaScript syntax.
        </div>
        <div class="section">
          <h2>Examples</h2>
          <p>
            Below are a few interactive examples of how the library can be used to define a grammar and parse a concrete syntax string into a JSON representation of an abstract syntax tree. You can change the grammar or input string and see the results immediately.
          </p>
          <h3>Battleship Game Example</h3>
          <p>
            Two players try to guess where the other's ships are.  There are three variations to test this, with varying speeds depending on the board size.
          </p>
          <td>
            Input definitions:<br/>
            <textarea id="inp" rows="30">
  function index_check_$answers(guesses, ships) {
    let $answers = [41, 20, 75, 65, 52];  //from server generate and share nonzero

    $answers = $answers.map((cur_g,g) => $answers.map((cur_s,s) =>
      $answers[g].smult(guesses[g].ssub(ships[s]))  // if this is 0, we hit
    ));

    return $answers;
  }

  function binary_check_$answers(guesses, ships) {
     let $answers = [41, 20, 75, 65, 52];
     $answers = $answers.map((curr, i) => ships[i].smult(guesses[i]));
     return $answers;
  }


  function row_col_check_$answers(guesses, ships) {
     let $answers = [41, 20, 75, 65, 52];  //from server generate and share nonzero
     $answers = $answers.map((cur_g, g) => $answers.map((cur_s, s) =>
       guesses[g].ssub(ships[s]).cadd(guesses.length).smult(
         guesses[g+1].ssub(ships[s+1]).cadd(guesses.length)
       ).csub(guesses.length*guesses.length).smult($answers[g/2])
     ));
     return $answers;
  }
</textarea>
          </td>
          <table>
            <br></br>
            <tr>
              <form>
                <select id="selected_cost" onchange="carousels('selected_cost', 'selected_param', 'preprocessing', 'inp','out');">
                  <!-- <option value="nothing">Select a Cost</option> -->
                  <option value="onlineMsg">onlineMsg</option>
                </select>
                <div id ="param" style ="display:none">
                  <select id="selected_param" onchange="carousels('selected_cost', 'selected_param', 'preprocessing', 'inp','out');">
                    <!-- <option value="nothing">Fix a Parameter</option> -->
                    <option value="boardsize">boardsize</option>
                    <!-- <option value="guesses">guesses</option> -->
                  </select>
                </div>
                <div id="checkbx">
                  <input type="checkbox" id="dynamic" onchange="carousels('selected_cost', 'selected_param', 'preprocessing', 'inp','out');" checked>Read decorators for dynamic length arrays
                </div>
              </form>
              <br/><br/>
              <td>
                Cost specification w/o preprocessing:<br/>
                <textarea id="spec" rows="18">

                </textarea>
              </td>
            </tr>
            <tr>
              <td colspan="2">
                Static analysis results:<br/>
                <div><pre id="out"></pre></div>
              </td>
            </tr>
            <table>
              Performance:<br/>
              <div id="myPlot" style="width:100%; height:100%"></div>
          </table>
        </div>
      </div><!-- /#sheet -->
      <div id="footer_spacer"></div>
    </div><!-- /#content -->
    <div id="footer">
      <hr/>
      <a href="https://www.github.com/multiparty/carousels">Repository</a>
    </div><!-- /#footer -->
  </body>
</html>
